<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yuwuquan.demo.orm.dao.UserMapper">
  <insert id="insertUser" parameterType="com.yuwuquan.demo.orm.model.SysUserInfo"  useGeneratedKeys="true" keyProperty="id">
    INSERT INTO `bingo_common`.`sys_user_info` (
      `unique_id`,
      `phone`,
      `username`,
      `password`,
      `name`,
      `sex`,
      `createtime`,
      `modifytime`,
      `isvalid`
    )
    VALUES
    (
        #{unique_id},
        #{phone},
        #{username},
        #{password},
        #{name},
        #{sex},
        NOW(),
        NOW(),
        1
    );
  </insert>
  <select id="queryByUser" parameterType="com.yuwuquan.demo.orm.model.SysUserInfo" resultType="com.yuwuquan.demo.orm.model.SysUserInfo">
       SELECT
          `id`,
          `unique_id`,
          `phone`,
          `username`,
          `password`,
          `name`,
          `sex`,
          `createtime` AS createTime,
          `modifytime` AS modifyTime,
          `fk_user_create` AS fkUserCreate,
          `fk_user_modify` AS fkUserModify,
          `isvalid` AS isValid
      FROM
          `bingo_common`.`sys_user_info` sui
      WHERE 1=1
      <if test="phone != null and phone != '' ">
          AND sui.phone = #{phone}
      </if>
      <if test="password != null and password != '' ">
          AND sui.password = #{password}
      </if>
      <if test="unique_id != null and unique_id != '' ">
          AND sui.unique_id = #{unique_id}
      </if>
      <if test="id != null">
          AND sui.id = #{id}
      </if>

  </select>
</mapper>